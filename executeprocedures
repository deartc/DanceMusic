-- CRUD   Create procedure   
---EXECUTE CreateArtist @Name = ‘Rolling Stones’, @Country = ‘England’
---EXECUTE UpdateArtist @ArtistID = 1, @ArtistNewName = ‘The Beatles’
--EXECUTE DeleteArtist @ArtistID = 1
--EXECUTE REadPlaylist @PlaylistID = 1










CREATE PROCEDURE spAlbumFromArtist 
	@ArtistName varchar(255)
AS
	SELECT AlbumName, ReleaseDate
	FROM Album
		INNER JOIN Artist
		ON Albums.ArtistId = Artist.ArtistId 
	WHERE Artist.ArtistName = @ArtistName;
GO





---Execute 

EXECUTE spAlbumFromArtist @ArtistName = "Abba";





----CRUD  UPDATE



ALTER PROCEDURE spAlbumsFromArtist 
	@ArtistName varchar(255)
AS
	SELECT 
        al.AlbumName, 
        al.ReleaseDate, 
        g.Genre
	FROM Albums al
		INNER JOIN Artists ar
		ON al.ArtistId = ar.ArtistId 
		INNER JOIN Genres g
		ON g.GenreId = al.GenreId 
	WHERE ar.ArtistName = @ArtistName;
  
GO


EXECUTE spAlbumFromArtist @ArtistName = "Abba";




----Select Procedure  Query

SELECT AlbumId, AlbumName, ArtistId 
FROM Albums 
WHERE ArtistId = 1;



EXECUTE spAlbumFromArtist @ArtistName = "Abba";





-----Select Procedure QUery

SELECT AlbumId, AlbumName, ArtistName 
FROM Album 
    INNER JOIN Artist 
    ON Albums.ArtistId = Artists.ArtistId 
WHERE ReleaseDate < '1980-01-01';



EXECUTE spAlbumFromArtist @ArtistName = "Abba";







----SELECT   Procedure Query Inner Join
SELECT AlbumName, YEAR(ReleaseDate) AS Year 
FROM Albums;




EXECUTE spAlbumFromArtist @ArtistName = "Abba";












/*Features Group 3: optimizing a Database */

/*I included the following third feature: Design a NONCLUSTERED INDEX with ONE KEY COLUMN that improves the performance of one of the above queries.
Group 3: Optimizing a Database*/

UPDATE music AS m SET albumID = (SELECT albumID FROM albumList AS a WHERE m.songalbum = a.album) WHERE albumID IS NULL
AND EXISTS (SELECT 1 FROM albumList AS a WHERE m.songalbum = a.album) ;




/*I did not include the folowing third features: Design a NONCLUSTERED INDEX with TWO KEY COLUMNS that improves the performance of one of the above queries.
Design a NONCLUSTERED INDEX with AT LEAST ONE KEY COLUMN and AT LEAST ONE INCLUDED COLUMN that improves the performance of one of the above queries.
*/


/*I included the following third feature: Design a NONCLUSTERED INDEX with ONE KEY COLUMN that improves the performance of one of the above queries.
Group 3: Optimizing a Database*/


CREATE UNIQUE NONCLUSTERED INDEX UIX_Student_FirstName_LastName On Student(FirstName, LastName)


/*I included the following third feature: Design a NONCLUSTERED INDEX with ONE KEY COLUMN that improves the performance of one of the above queries.
Group 3: Optimizing a Database*/

CREATE NONCLUSTERED INDEX [IndexName] 
ON [SchemaName].[TableName] ([ColumnName] DESC)
GO



/* Design a NONCLUSTERED INDEX with TWO KEY COLUMNS that improves the performance of one of the above queries.
Design a NONCLUSTERED INDEX with AT LEAST ONE KEY COLUMN and AT LEAST ONE INCLUDED COLUMN that improves the performance of one of the above queries.
*/
Artist (
    ArtistID int NOT NULL IDENTITY(1, 1) PRIMARY KEY CLUSTERED,
    ArtistName varchar(100) NOT NULL)
 
Album (
    AlbumID int NOT NULL IDENTITY(1, 1) PRIMARY KEY CLUSTERED,
    ArtistID int NOT NULL,
    AlbumName varchar(100) NOT NULL,
    CONSTRAINT FK_Album_Artist FOREIGN KEY (ArtistID)
        REFERENCES Artists (ArtistID))
 
Song (
    SongID int NOT NULL IDENTITY(1, 1) PRIMARY KEY CLUSTERED,
    AlbumID int NOT NULL,
    SongName varchar(100) NOT NULL,
    NumberOfListens int NOT NULL DEFAULT 0
    CONSTRAINT FK_Song_Album FOREIGN KEY (AlbumID)
        REFERENCES Album (AlbumID))
CREATE UNIQUE INDEX IX_Artist_Name ON Artist (ArtistName)
CREATE UNIQUE INDEX IX_Album_Artist_Name ON Album (ArtistID, AlbumName)
CREATE UNIQUE INDEX IX_Song_Album_Name ON Song (AlbumID, SongName)
    INCLUDE (NumberOfListens)
    
    
    
    
 











